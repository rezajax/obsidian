![[Pasted image 20250102091707.png]]


if yes add user for wireshark


این پیام از شما می‌پرسه که آیا می‌خواهید کاربران عادی (غیر ریشه یا **non-superusers**) بتوانند بسته‌های شبکه را با استفاده از ابزار Wireshark یا Dumpcap ضبط کنند یا نه.

### جزئیات:

1. **توضیحات امنیتی:**
    
    - اگر این قابلیت را فعال کنید (**Yes**)، کاربران عادی که عضو گروه **wireshark** هستند، می‌توانند بسته‌های شبکه را ضبط کنند.
    - این روش امن‌تر از اجرای مستقیم Wireshark به صورت کاربر root است، چون در این حالت تنها بخشی از برنامه با سطح دسترسی بالا اجرا می‌شود.
    - با این حال، فعال کردن این قابلیت ممکن است یک **ریسک امنیتی** باشد، چون به کاربران اجازه دسترسی به داده‌های حساس شبکه را می‌دهد.
2. **توصیه پیش‌فرض:**
    
    - اگر شک دارید یا از امنیت سیستم مطمئن نیستید، بهتر است گزینه **No** را انتخاب کنید (غیرفعال کردن دسترسی کاربران عادی).
3. **پیشنهاد:**
    
    - اگر فقط خودتان از این سیستم استفاده می‌کنید یا کنترل کاملی روی کاربران دارید، می‌توانید گزینه **Yes** را انتخاب کنید و سپس کاربر خودتان را به گروه **wireshark** اضافه کنید:
        
        bash
        
        Copy code
        
        `sudo usermod -aG wireshark $USER`
        
    - بعد از این، باید یک بار از حساب خود خارج و دوباره وارد شوید تا تغییرات اعمال شوند.

### انتخاب نهایی:

- اگر از این سیستم در محیطی عمومی یا چندکاربره استفاده می‌کنید: **No**
- اگر سیستم شما شخصی است و می‌خواهید راحت‌تر از Wireshark استفاده کنید: **Yes**

4o

##### You said:

بعدش دیگه نیاز نیست sudo wireshark بزنم؟

###### ChatGPT said:

ChatGPT

دقیقاً! اگر گزینه **Yes** را انتخاب کنید و سپس کاربر خود را به گروه **wireshark** اضافه کنید، دیگر نیازی به اجرای Wireshark با دستور `sudo` نخواهید داشت. به این شکل می‌توانید Wireshark را به عنوان یک کاربر عادی اجرا کنید، و این کار هم امنیت سیستم را بیشتر می‌کند و هم استفاده از برنامه راحت‌تر خواهد بود.

### مراحل کامل برای استفاده بدون `sudo`:

1. **انتخاب "Yes"** در مرحله نصب.
2. اضافه کردن کاربر خود به گروه `wireshark`:
    
    bash
    
    Copy code
    
    `sudo usermod -aG wireshark $USER`
    
3. از حساب کاربری خود خارج شده و دوباره وارد شوید (یا سیستم را ری‌استارت کنید).
4. حالا می‌توانید Wireshark را به صورت عادی اجرا کنید:
    
    bash
    
    Copy code
    
    `wireshark`
    

### نکته:

حتماً بررسی کنید که دسترسی‌ها به درستی تنظیم شده‌اند:

bash

Copy code

`getcap $(which dumpcap)`

خروجی باید چیزی شبیه به این باشد:

bash

Copy code

`/usr/bin/dumpcap = cap_net_admin,cap_net_raw+eip`

اگر این تنظیمات وجود نداشتند، می‌توانید آن‌ها را به صورت دستی اضافه کنید:

bash

Copy code

`sudo setcap cap_net_raw,cap_net_admin+eip $(which dumpcap)`

حالا بدون نیاز به `sudo` می‌توانید بسته‌های شبکه را ضبط کنید! 😊